<!doctype html>
<html>

<head>
    <title>Tenant Management</title>
    <meta name="description" content="Our first page">
    <meta name="keywords" content="html tutorial template">
    <style>
        .dataCustM {
            width: 80%;
            margin: 0 auto 50px;
            padding: 10px 0 50px;
        }

        .dataCustM thead {
            background: #ffc107 !important;
        }

        .dataCustM .paginate_button {
            color: #000;
            padding: 0 5px;
            text-decoration: none;
            cursor: pointer;
        }

        .dataCustM .paginate_button.current {
            background: #28a745;
            border-radius: 5px;
            padding: 4px 10px;
            color: #fff;
        }

        .dataCustM div#example_length {
            width: 50%;
            float: left;

        }

        .dataCustM div#example_length select {
            outline: none;
            border: 1px solid #ced4da;
            border-radius: 3px;
            padding: 3px 2px;
        }

        .dataCustM a {
            text-decoration: none;
        }

        .dataCustM div#example_info {
            width: 50%;
            float: left;
        }

        .dataCustM div.dataTables_wrapper div.dataTables_paginate {
            margin: 0;
            white-space: nowrap;
            text-align: right;
            width: 50%;
            float: right;
            padding-top: .85em;
        }

        .dataCustM .table td button.viewBtn {
            background: #28a745;
            color: #fff;
            border: 1px solid #28a745;
            border-radius: 3px;
            font-size: 14px;
            line-height: 24px;
            padding: 3px 12px;
        }

        .dataCustM .table td button.viewBtn:hover {
            background: transparent;
            color: #28a745;
        }

        .dataCustM .table td button.editBtn {
            background: #dc3545;
            color: #fff;
            border: 1px solid #dc3545;
            border-radius: 3px;
            font-size: 14px;
            line-height: 24px;
            padding: 3px 12px;
        }

        .dataCustM .table td button.editBtn:hover {
            background: transparent;
            color: #dc3545;
        }

        .dataCustM input[type="search"] {
            outline: none;
            border: 1px solid #ced4da;
            border-radius: 3px;
            padding: 3px 10px;
        }

        .container .headingH h1 {
            font-size: 37px;
            line-height: 46px;
            color: #000;
            text-align: center;
            background: #f5e625 !important;
            padding: 15px 10px;
            border: 3px solid #d7d2d2;
        }

        .container .headingH h1 span {
            flex: none;
            text-align: center;
            margin: 0 auto;
        }

        .container .headingH h1 a {
            color: #060505;
            text-decoration: none;
            background-color: transparent;
            font-size: 18px;
        }

        .dataCustM table th {
            text-align: center !important;
        }
    </style>

</head>

<body>
    <%- include("./partials/header2.ejs") %>
        <div class="container" style="width: 100%; max-width: 100%;">
            <div class="headingH">
                <h1 class="d-flex">
                    <a href="/dashboard">
                        <i class="fa fa-arrow-left">

                        </i>
                    </a>
                    <span>Let's Add Rent</span>
                </h1>
            </div>
            <div class="row mt-5" style="margin-bottom: 50px">
                <div class="col-md-6 m-auto">
                    <div class="card card-body ">
                        <form action="/tenant/addRent" method="POST">
                            <div class="form-group">
                                <div>
                                    <%- include("./partials/messages") %>
                                    <label>Name:</label>
                                    <input type="test" name="name" class="form-control" value="<%= tenantData.name%>"
                                        disabled required />
                                        <label>Room No:</label>
                                        <input type="test" name="roomNo" class="form-control"
                                            placeholder="Enter room number" value="<%= tenantData.roomNo%>" disabled required />
                                        <label>Paid Amount:</label>
                                        <input type="number" name="paidAmount" class="form-control"
                                            placeholder="Enter paid amount" value="<%= tenantData.rent%>" required />
                                        <label>Month:</label>
                                        <select name="rentPayMonth" id="rentPayMonth" class="form-control" required>
                                            <option value="1">January</option>
                                            <option value="2">February</option>
                                            <option value="3">March</option>
                                            <option value="4">April</option>
                                            <option value="5">May</option>
                                            <option value="6">June</option>
                                            <option value="7">July</option>
                                            <option value="8">August</option>
                                            <option value="9">September</option>
                                            <option value="10">October</option>
                                            <option value="11">November</option>
                                            <option value="12">December</option>
                                        </select>
                                        <label>Payment Mode:</label>
                                        <select class="form-control" id="paymentMode" name="paymentMode"
                                            placeholder="Enter Payment Mode" required>
                                            <option value="Cash">Cash</option>
                                            <option value="Online">Online</option>
                                        </select>

                                        <label>Payment Status:</label>
                                        <select class="form-control" id="status" name="status"
                                            placeholder="Enter status" required>
                                            <option value="Full">Full Payment</option>
                                            <option value="Half">Half Payment</option>
                                        </select>
                                        <label>Note:</label>
                                        <input type="text" name="note" class="form-control"
                                            placeholder="Enter any note/reminder" />
                                        <input id="tenantId" name="tenantId" value="<%=tenantData._id%>"
                                            class="form-control" type="hidden">
                                </div>
                                <div>
                                    <button type="submit" name="vinb" class="btn btn-success btn-block mt-2"
                                        style="padding-left: 80px; padding-right: 80px;">Add</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="dataCustM">
            <table id="example" class="table table-striped table-bordered"
                style="width:100%; margin-bottom: 100px; text-align: center;">
                <thead>
                    <tr>
                        <th>S No.</th>
                        <th>Name.</th>
                        <th>Room No.</th>
                        <th>Paid Amount</th>
                        <th>Month</th>
                        <th>Payment Mode</th>
                        <th>Payment Status</th>
                        <th>Entry date</th>
                        <th>Note</th>
                    </tr>
                </thead>
                <tbody>
                    <% let i=1; %>
                        <% for(details of data) { %>
                            <tr>
                                <td>
                                    <%= i++ %>
                                </td>
                                <td>
                                    <%=tenantData.name%>
                                </td>
                                <td>
                                    <%=tenantData.roomNo%> 
                                </td>
                                <td>
                                    <%=details.paidAmount%>
                                </td>
                                <td>
                                    <% const months=[ "January" , "February" , "March" , "April" , "May" , "June"
                                        , "July" , "August" , "September" , "October" , "November" , "December" ]; const
                                        monthIndex=parseInt(details.rentPayMonth) - 1; %>
                                        <%= (monthIndex>= 0 && monthIndex < 12) ? months[monthIndex] : 'N/A' %>
                                </td>
                                <td>
                                    <%=details.paymentMode%>
                                </td>
                                <td>
                                    <%=details.status%>
                                </td>
                                <td>
                                    <%=details.createdDate.toLocaleString(undefined, {timeZone: 'Asia/Kolkata' })%>
                                </td>
                                <td>
                                    <%= details.note ? details.note : 'N/A' %>
                                </td>
                            </tr>
                            <%}%>
                </tbody>
            </table>
        </div>
        <%- include("./partials/footer2.ejs") %>
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const selectedMonth = parseInt("<%= month %>", 10) + 1; // Current month + 1
                    const monthSelect = document.getElementById("rentPayMonth");

                    // Set the selected month option
                    monthSelect.value = selectedMonth? selectedMonth:1;

                    // Disable all options below the selected month
                    Array.from(monthSelect.options).forEach(option => {
                        if (parseInt(option.value, 10) < selectedMonth) {
                            option.disabled = true;
                        }
                    });
                });
            </script>
</body>

</html>